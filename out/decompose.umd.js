!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).decompose={})}(this,function(e){var t=Symbol(),n=Symbol(),r=Symbol(),o=Symbol(),i=Symbol(),u=Symbol(),c=Symbol(),s=function(){function e(e){return this[n]={},this[t]=e,Object.seal(this),this}var u=e.prototype;return u[r]=function(){var e=this;Object.getOwnPropertySymbols(this[n]).forEach(function(r){return e[n][r](e[t])})},u[o]=function(e){this[n][e.id]=e},u[i]=function(e){delete this[n][e.id]},u.valueOf=function(){return this[t]},u.toString=function(){return this[t]},u.toLocaleString=function(){return this[t]},e}();function a(e,t){void 0===t&&(t=!1);var n=a.$||(a.$={enumerable:t,writable:!1,configurable:!1,value:e});return n.value!==e&&(n.value=e),n}var l=function(e,t){console.log("TERROR-801::Attempted to use Object.defineProperty on "+e+", please use the default setter ('"+e+"."+t+" = ') instead")},f=function(e){console.log("TERROR-821::"+e+" is not a valid callback!")},p=function(){function e(e){var n=this;this.value=e[t];var r=function(e){return!!e.id||(f(e),!1)};return Object.defineProperty(this,"addObserver",a(function(t){return r(t)&&e[o](t),n},!0)),Object.defineProperty(this,"deleteObserver",a(function(t){return r(t)&&e[i](t),n},!0)),this}var n=e.prototype;return n.valueOf=function(){return this.value},n.toLocaleString=function(){return this.value},n.toString=function(){return this.value},e}();function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e,t,n){return(v=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&h(o,n.prototype),o}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)})(e)}var m=function(){function e(e,n){var o=this;this.callbacks=new Proxy(Object.create(null),{defineProperty:function(e,t){return l("this.callbacks",t),!0},get:function(e,t){return e[t]},set:function(e,t,n){return n.id=Symbol(),Object.defineProperty(e,t,a(n,!0)),!0}}),this.observables=new Proxy(Object.create(null),{defineProperty:function(e,t){return l("this.observables",t),!0},get:function(e,t){return new p(e[t])},set:function(e,n,o){return e[n]?e[n][t]=o:e[n]=new s(o),e[n][r](),!0}});var i=0;return this.properties={},console.log(n),n[0].forEach(function(e,t){"string"==typeof e?o.properties[e]="":(o.properties["cProp"+i]="function"==typeof e?e():"object"==typeof e?e.$:e,n[0][t]="cProp"+i,i+=1)}),console.log(this.properties),this[c]=function(){return function(e,t){return function(n){var r=e[0];return console.log(t),t[0].forEach(function(t,o){r+=n[t]?n[t]:"",r+=e[o+1]}),r}}(e,n)(o.properties)},this[u]=e,this}e.create=function(t){return new e(t,[].slice.call(arguments,1))};var n,o=e.prototype;return o.setName=function(e){var t=this;return this.Name=e,customElements.define("d-"+this.Name,function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n),r}(d(HTMLElement))),this.element=document.createElement("d-"+this.Name),this.elements={},function(e){var t=[].concat(e.matchAll(/jayes-name=([a-zA-Z_$][a-zA-Z_$0-9]+)/g)),n=[];return t.forEach(function(e){n.push(e[1])}),n}(this[u].join(".")).forEach(function(e){Object.defineProperty(t.elements,e,{get:function(){return t.element.querySelector('[jayes-name="'+e+'"]')},set:function(){},enumerable:!0,configurable:!1})}),this},o.setOnLoad=function(e){return this.onLoad=e,this},o.setCallbacks=function(e){var t=this;return Object.entries(e).forEach(function(e){t.callbacks[e[0]]=e[1]}),this},o.setObservables=function(e){var t=this;return Object.entries(e).forEach(function(e){t.observables[e[0]]=(0,e[1])()}),this},(n=[{key:"name",get:function(){return this.Name}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,n),e}();function g(e){var t=this,n=m.create(e.lines,e.keys).setName(e.name);return e.onLoad&&n.setOnLoad(e.onLoad),e.callbacks&&n.setCallbacks(e.callbacks),e.observables&&n.setObservables(e.observables),function(e){var r={};Object.assign(r,n.properties),Object.entries(e).forEach(function(e){var t=e[1];t&&(n.properties[e[0]]=""+t)}),console.log(n.properties),n.element.innerHTML=n[c](),Object.assign(n.properties,r),console.log(n);var o={get callbacks(){return n.callbacks},setCallback:new Proxy(t.callbacks,{get:function(e,t){return function(n){var r=n.bind(o);e[t]=r}}}),get observables(){return n.observables},get element(){return n.element},get elements(){return n.elements},get name(){return n.name},get onLoad(){return n.onLoad},get asProp(){return this.element.outerHTML.replaceAll(/^</g,"").replaceAll(/>$/g,"")},toString:function(){return this.asProp},toLocaleString:function(){return this.asProp},valueOf:function(){return this.asProp}}}}var O=Object.create(null),j=new Proxy(O,{defineProperty:function(){f("componentsRegistry")},get:function(e,t){return e[t]},set:function(){return!0}});e.de={components:j,compose:function(e){var t=arguments;return function(n){return n.lines=e,n.keys=[].slice.call(t,1),O[n.name]=g(n),j}}}});
