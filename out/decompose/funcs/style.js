import{SHEET}from"../consts/symbols.js";let sizer=()=>{let e=.01*window.innerHeight,l=.01*window.innerWidth;document.body.style.setProperty("--mh",e+"px"),document.body.style.setProperty("--mw",l+"px")};sizer(),window.onresize=sizer;export function literalParser(e,l){let t=e.replaceAll(/[\s\n]+/g," ").replaceAll(/(;|{|})(\S)/g,"$1 $2").replaceAll(/(;|{|})(\s)/g,"$1\n").replaceAll(/("([^";]*)")/g,"'$2'").replaceAll(/(")/g,"\\$1").replaceAll(/(\d+)( *v)(h|w)/gm," calc($1 * var(--m$3) ) ").replaceAll(/^[ ]*([@].*[^ ":])[ ]*({)$/gm,'"$1": $2').replaceAll(/^[ ]*([&].*[^ ":])[ ]*({)$/gm,'"$1": $2').replaceAll(/^[ ]*([^&}@]?.*[^ ":])[ ]*({)$/gm,'"$1": $2').replaceAll(/^[ ]*([-=a-zA-Z ]+):[ ]*([^;]+);[ ]*$/gm,'"$1": "$2",').replaceAll(/^[ ]*(})[ ]*$/gm,"$1,").replaceAll(/,[ ]*\n[ ]*\}/g,"\n}").replaceAll(/,[ ]*$/g,"");console.log(t);let r=JSON.parse(`{${t}}`);function s(e,l,t){Object.entries(e).forEach((([r,c])=>{if("object"==typeof c&&r.startsWith("&")){let n=r.replaceAll(/&/g,t);l[t+n]=c,Object.entries(c).forEach((([e,r])=>{"object"==typeof r&&e.startsWith("&")&&s(l[t+n],l,t+n)})),delete e[r]}}))}return Object.entries(r).forEach((([e,t])=>{if("object"==typeof t){let c;l?(c=`${l} > ${e}`,r[c]=t,delete r[e]):c=e,s(r[c],r,c)}})),r}export function ruleInserter(e,l){if(!e[l])if(7===e[SHEET].type){let t=e[SHEET].cssRules.length;e[SHEET].appendRule(l+" {}"),e[l]=e[SHEET].cssRules[t]}else{let t=e[SHEET].cssRules.length;e[SHEET].insertRule(l+" {}",t),e[l]=e[SHEET].cssRules[t]}}