import{ELEMENT,SHEET,RULES,QUERIES}from"../consts/symbols.js";import{PROXY}from"../consts/proxy.js";import{tError}from"../tError.js";export class Style{constructor(){this[ELEMENT]=document.createElement("style"),this[ELEMENT].id="destyle",document.head.appendChild(this[ELEMENT]);let e=Object.create(null);e[SHEET]=this[ELEMENT].sheet,console.log(e),this[RULES]=new Proxy(e,PROXY.style),this[QUERIES]={rules:Object.create(null),new(t){let s=e[SHEET].cssRules.length;e[SHEET].insertRule(t+" {}",s);let E=Object.create(null);return E[SHEET]=e[SHEET].cssRules[s],this.rules[t]=new Proxy(E,PROXY.style),this.rules[t]}}}setStyle(e){let t=(e,t)=>{Object.entries(t).forEach((([t,s])=>{"object"!=typeof s?this[RULES][e](t,s):tError.e903(s)}))},s=(e,t)=>{this[QUERIES].new(e),Object.entries(t).forEach((([t,s])=>{Object.entries(s).forEach((([s,E])=>{"object"!=typeof E?this[QUERIES].rules[e][t](s,E):tError.e903(E)}))}))};Object.entries(e).forEach((([e,E])=>{e.startsWith("@")?s(e,E):t(e,E)}))}}