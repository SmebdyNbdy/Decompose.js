const e=Symbol(),t=Symbol(),s=Symbol(),r=Symbol(),o=Symbol(),n=Symbol(),l=Symbol(),i=Symbol(),a={e801(e,t){console.log(`TERROR-801::Attempted to use Object.defineProperty on ${e}, please use the default setter ('${e}.${t} = ') instead`)},e821(e){console.log(`TERROR-821::${e} is not a valid callback!`)}};function c(e,t=!1){var s=c.$||(c.$={enumerable:t,writable:!1,configurable:!1,value:e});return s.value!==e&&(s.value=e),s}class h{constructor(s){return this[t]={},this[e]=s,Object.seal(this),this}[s](){Object.getOwnPropertySymbols(this[t]).forEach(s=>this[t][s](this[e]))}[r](e){this[t][e.id]=e}[o](e){delete this[t][e.id]}valueOf(){return this[e]}toString(){return this[e]}toLocaleString(){return this[e]}}class b{constructor(t){this.value=t[e];let s=e=>!!e.id||(a.e821(e),!1);return Object.defineProperty(this,"addObserver",c(e=>(s(e)&&t[r](e),this),!0)),Object.defineProperty(this,"deleteObserver",c(e=>(s(e)&&t[o](e),this),!0)),this}valueOf(){return this.value}toLocaleString(){return this.value}toString(){return this.value}}const u={callbacks:{defineProperty:(e,t)=>(a.e801("this.callbacks",t),!0),get:(e,t)=>e[t],set:(e,t,s)=>(s.id=Symbol(),Object.defineProperty(e,t,c(s,!0)),!0)},observables:{defineProperty:(e,t)=>(a.e801("this.observables",t),!0),get:(e,t)=>new b(e[t]),set:(t,r,o)=>(t[r]?t[r][e]=o:t[r]=new h(o),t[r][s](),!0)},components:{defineProperty(){a.e821("componentsRegistry")},get:(e,t)=>e[t],set:()=>!0}};class p{constructor(e,t){this[n]=Object.create(null),this[l]=Object.create(null),this.callbacks=new Proxy(this[n],u.callbacks),this.observables=new Proxy(this[l],u.observables),this.properties={};let s=0;return t.forEach((e,r)=>{switch(typeof e){case"string":this.properties[e]="";break;case"function":this.properties[`cProp${s}`]=e();break;case"object":this.properties[`cProp${s}`]=e.$;break;default:this.properties[`cProp${s}`]=e,t[r]=`cProp${s}`,s+=1}}),console.log(this.properties),this[i]=function(e,t){return s=>{let r=e[0];return console.log(t),t.forEach((t,o)=>{r+=s[t]?s[t]:"",r+=e[o+1]}),r}}(e,t),this.elements=[],function(e){let t=[...e.matchAll(/jayes-name=([a-zA-Z_$][a-zA-Z_$0-9]+)/g)],s=[];return t.forEach(e=>{s.push(e[1])}),s}(e.join(".")).forEach(e=>this.elements.push(e)),this}get name(){return this.Name}setName(e){return this.Name=e,customElements.define(`d-${this.Name}`,class extends HTMLElement{}),this.element=document.createElement(`d-${this.Name}`),this}setOnLoad(e){return this.onLoad=e,this}}let m=Object.create(null);var d=new Proxy(m,u.components);let f={components:d,compose:function(e,...t){return s=>(s.lines=e,s.keys=t,m[s.name]=function(e){let t=new p(e.lines,e.keys).setName(e.name);return e.onLoad&&t.setOnLoad(e.onLoad),e.callbacks&&Object.entries(e.callbacks).forEach(([e,s])=>{t.callbacks[e]=s}),e.observables&&Object.entries(e.observables).forEach(([e,s])=>{t.observables[e]=s}),class{constructor(e){this.properties={},Object.assign(this.properties,t.properties),Object.entries(e).forEach(([e,t])=>{t&&(this.properties[e]=t)}),console.log(t.properties),console.log(this.properties),this.element=document.createElement(`d-${t.name}`),this.element.innerHTML=t[i](this.properties),this.elements={},t.elements.forEach(e=>{this.elements[e]=this.element.querySelector(`[jayes-name="${e}"]`)}),this.callbacks=new Proxy(Object.create(null),u.callbacks),Object.entries(t[n]).forEach(([e,t])=>{let s=t.bind(this);this.callbacks[e]=s}),this.observables=new Proxy(Object.create(null),u.observables),Object.entries(t[l]).forEach(([e,t])=>{this.observables[e]=t});let s=t.onLoad;return s&&(this.onLoad=s.bind(this)),this}get name(){return t.name}get asProp(){let e=this.element.outerHTML;return e=e.replaceAll(/^</g,"").replaceAll(/>$/g,""),e}toString(){return this.asProp}toLocaleString(){return this.asProp}valueOf(){return this.asProp}}}(s),d)}};export{f as de};
